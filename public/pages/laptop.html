<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Laptops - KurdShopping</title>
    <link rel="stylesheet" href="../styles/main.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <style>
        /* Form Styles */
        .add-item-form {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0,0,0,0.2);
            z-index: 1000;
            width: 400px;
            max-width: 90%;
        }
        
        .form-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 999;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        
        .form-group input, 
        .form-group textarea,
        .form-group select {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        
        .form-actions {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
        }
        
        .form-actions button {
            padding: 8px 16px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .cancel-btn {
            background: #f1f1f1;
        }
        
        .submit-btn {
            background: #4CAF50;
            color: white;
        }
        
        .close-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background: none;
            border: none;
            font-size: 1.2rem;
            cursor: pointer;
        }

        /* Laptop Items Grid */
        .laptops-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            padding: 20px;
            margin-top: 20px;
        }

        .laptop-item {
            border: 1px solid #ddd;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
        }

        .laptop-item:hover {
            transform: translateY(-5px);
        }

        .laptop-image {
            width: 100%;
            height: 180px;
            object-fit: cover;
            background-color: #f5f5f5;
        }

        .laptop-details {
            padding: 15px;
        }

        .laptop-name {
            font-size: 1.1rem;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .laptop-brand {
            color: #666;
            font-size: 0.9rem;
            margin-bottom: 5px;
        }

        .laptop-price {
            font-size: 1.2rem;
            color: #e53935;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .laptop-specs {
            font-size: 0.8rem;
            color: #555;
            margin-bottom: 10px;
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        /* Add button styles */
        .add-button {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: #4CAF50;
            border: none;
            border-radius: 50%;
            width: 60px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            z-index: 100;
        }

        .add-button:hover {
            background: #43A047;
        }
    </style>
</head>
<body>

    <header class="header">
        <p class="logo" style="display: inline; vertical-align: middle;">KurdShopping</p>
        <a href="./home.html" class="material-icons" style="vertical-align: middle; cursor: pointer; font-size: 2rem; margin-right: 8px;">
            home
        </a>
        <a href="./profile.html" class="material-icons" style="vertical-align: middle; cursor: pointer; font-size: 2rem; margin-left: 8px;">
            account_circle
        </a>
        <span class="material-icons" style="vertical-align: middle; cursor: pointer; margin-left: 16px;">
            search
        </span>
    </header>

    <div class="laptops-container" id="laptopsContainer">
        <!-- Laptop items will be added here dynamically -->
    </div>

    <button class="add-button" id="addButton">
        <img src="../images/add.svg" alt="Add item" class="add-image" width="30px" height="30px">
    </button>
    
    <!-- Add Item Form (hidden by default) -->
    <div class="form-overlay" id="formOverlay"></div>
    <div class="add-item-form" id="addItemForm">
        <button class="close-btn" id="closeBtn">&times;</button>
        <h2>Add New Laptop</h2>
        <form id="laptopForm">
            <div class="form-group">
                <label for="laptopName">Laptop Name</label>
                <input type="text" id="laptopName" required>
            </div>
            
            <div class="form-group">
                <label for="laptopBrand">Brand</label>
                <select id="laptopBrand" required>
                    <option value="">Select Brand</option>
                    <option value="Apple">Apple</option>
                    <option value="Dell">Dell</option>
                    <option value="HP">HP</option>
                    <option value="Lenovo">Lenovo</option>
                    <option value="Asus">Asus</option>
                    <option value="Acer">Acer</option>
                    <option value="MSI">MSI</option>
                    <option value="Other">Other</option>
                </select>
            </div>
            
            <div class="form-group">
                <label for="laptopPrice">Price ($)</label>
                <input type="number" id="laptopPrice" min="0" step="0.01" required>
            </div>
            
            <div class="form-group">
                <label for="laptopDescription">Description</label>
                <textarea id="laptopDescription" rows="3" required></textarea>
            </div>
            
            <div class="form-group">
                <label for="laptopSpecs">Specifications</label>
                <textarea id="laptopSpecs" rows="3" placeholder="Processor, RAM, Storage, etc." required></textarea>
            </div>
            
            <div class="form-group">
                <label for="laptopImages">Upload Images</label>
                <input type="file" id="laptopImages" accept="image/*" multiple>
            </div>
            
            <div class="form-actions">
                <button type="button" class="cancel-btn" id="cancelBtn">Cancel</button>
                <button type="submit" class="submit-btn">Add Laptop</button>
            </div>
        </form>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const addButton = document.getElementById('addButton');
            const formOverlay = document.getElementById('formOverlay');
            const addItemForm = document.getElementById('addItemForm');
            const closeBtn = document.getElementById('closeBtn');
            const cancelBtn = document.getElementById('cancelBtn');
            const laptopForm = document.getElementById('laptopForm');
            const laptopsContainer = document.getElementById('laptopsContainer');
            
            // Key for storing laptops in localStorage (in a real app, use a database)
            const STORAGE_KEY = 'kurdShopping_laptops';
            
            // Load laptops from storage
            function loadLaptops() {
                const laptopsJSON = localStorage.getItem(STORAGE_KEY);
                return laptopsJSON ? JSON.parse(laptopsJSON) : [];
            }
            
            // Save laptops to storage
            function saveLaptops(laptops) {
                localStorage.setItem(STORAGE_KEY, JSON.stringify(laptops));
            }
            
            // Display all laptops
            function displayLaptops() {
                const laptops = loadLaptops();
                laptopsContainer.innerHTML = '';
                
                if (laptops.length === 0) {
                    laptopsContainer.innerHTML = '<p>No laptops available. Add one to get started!</p>';
                    return;
                }
                
                laptops.forEach(laptop => {
                    addLaptopToPage(laptop);
                });
            }
            
            // Initial display
            displayLaptops();
            
            // Show form when add button is clicked
            addButton.addEventListener('click', function() {
                formOverlay.style.display = 'block';
                addItemForm.style.display = 'block';
            });
            
            // Hide form when close button is clicked
            closeBtn.addEventListener('click', function() {
                formOverlay.style.display = 'none';
                addItemForm.style.display = 'none';
            });
            
            // Hide form when cancel button is clicked
            cancelBtn.addEventListener('click', function() {
                formOverlay.style.display = 'none';
                addItemForm.style.display = 'none';
            });
            
            // Hide form when overlay is clicked
            formOverlay.addEventListener('click', function() {
                formOverlay.style.display = 'none';
                addItemForm.style.display = 'none';
            });
            
            // Handle form submission
            laptopForm.addEventListener('submit', function(e) {
                e.preventDefault();
                
                // Get form values
                const name = document.getElementById('laptopName').value;
                const brand = document.getElementById('laptopBrand').value;
                const price = parseFloat(document.getElementById('laptopPrice').value).toFixed(2);
                const description = document.getElementById('laptopDescription').value;
                const specs = document.getElementById('laptopSpecs').value;
                const images = document.getElementById('laptopImages').files;
                
                // Create a new laptop object
                const newLaptop = {
                    id: Date.now(), // Simple unique ID
                    name,
                    brand,
                    price,
                    description,
                    specs,
                    // In a real app, you would upload the image to a server and get the URL
                    // For this demo, we'll use a placeholder
                    imageUrl: images.length > 0 ? URL.createObjectURL(images[0]) : 'https://via.placeholder.com/300x180?text=No+Image',
                    addedBy: localStorage.getItem('userEmail') || 'Anonymous',
                    dateAdded: new Date().toISOString()
                };
                
                // Save the new laptop
                const laptops = loadLaptops();
                laptops.unshift(newLaptop); // Add to beginning
                saveLaptops(laptops);
                
                // Add the new laptop to the page
                displayLaptops();
                
                // Reset form and hide it
                laptopForm.reset();
                formOverlay.style.display = 'none';
                addItemForm.style.display = 'none';
                
                // Show success message
                alert('Laptop added successfully! It will be visible to all users.');
            });
            
            // Function to add a laptop to the page
            function addLaptopToPage(laptop) {
                const laptopItem = document.createElement('div');
                laptopItem.className = 'laptop-item';
                
                laptopItem.innerHTML = `
                    <img src="${laptop.imageUrl}" alt="${laptop.name}" class="laptop-image">
                    <div class="laptop-details">
                        <div class="laptop-name">${laptop.name}</div>
                        <div class="laptop-brand">${laptop.brand}</div>
                        <div class="laptop-price">$${laptop.price}</div>
                        <div class="laptop-specs" title="${laptop.specs}">${laptop.specs}</div>
                        <div style="font-size: 0.7rem; color: #888;">Added by: ${laptop.addedBy}</div>
                    </div>
                `;
                
                laptopsContainer.appendChild(laptopItem);
            }
        });
    </script>
</body>
</html>